function GeneratePass(s,t,e){var a,l,o="";for(l=1;t>=l;l++)a=Math.floor(Math.random()*s.length),o+=s.substring(a,a+1),("true"===e||e===!0)&&(s=s.replace(s.substring(a,a+1),""));return o=o.replace("&","&amp;"),o=o.replace(">","&gt;"),o=o.replace("<","&lt;")}function showSettings(){$(".password, .last-passwords-icon").addClass("hidden").removeClass("selectable"),$(".settings-icon").addClass("active"),$(".settings").removeClass("flipOutX").addClass("animated flipInX")}function hideSettings(){$(".password, .last-passwords-icon").removeClass("hidden"),$(".password").addClass("selectable"),$(".settings-icon").removeClass("active"),$(".settings").removeClass("flipInX").addClass("flipOutX")}function setPasswordLength(s){$(this).text(s),length=s,localStorage.setItem("passLength",length)}function closeLastPass(){$(".last-passwords").removeClass("bounceIn").addClass("bounceOut"),$(".close").toggleClass("hidden"),setTimeout(function(){$(".last-passwords").removeClass("visible"),$(".wrapper").toggleClass("blur")},500)}$(document).ready(function(){initMainTabs(),initGeneratePass(),initSettings(),initLastPasswords(),initLocalStorage()}),$(window).load(function(){$("#fade-box").fadeOut(),$(".content").removeClass("no-animation"),window.scrollTo(0,0)});var chars="1234567890ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",length=10,no_repeat=!1;localStorage.getItem("chars")&&(chars=localStorage.getItem("chars"),no_repeat=localStorage.getItem("no_repeat")),initBrowserCheck=function(){if(!$("html").hasClass("iphone")){$(".wrapper, #footer, .last-passwords").remove(),$.ajax("inc/desktop.php",{success:function(s){$("body").prepend(s)},error:function(){console.log("Ошибка при ajax-запросе!")},timeout:3e3});var s=document.querySelector("meta[name=viewport]");s.setAttribute("content","width=device-width")}},initMainTabs=function(){$$("header .list-btn li").tap(function(){var s=$(this).index(),t=$(".wrapper .content");t.removeClass("active").eq(s).addClass("active"),$(this).parent().find(".btn").removeClass("active"),$(this).find(".btn").addClass("active")})},initGeneratePass=function(){$$("#generate-btn .btn").tap(function(){if(!$(this).hasClass("disabled")){$(this).addClass("disabled");var s="flipInX";$(".password").addClass("selectable").removeClass("small").html(GeneratePass(chars,length,no_repeat)).addClass(s),localStorage.setItem("password",$(".password").html());var t=$(this);setTimeout(function(){$(".password").removeClass(s),t.removeClass("disabled")},500);var e=6;$(".last-passwords li").length!=e?$(".last-passwords ul").prepend("<li>"+$(".password").html()+"</li>"):($(".last-passwords ul li:last").remove(),$(".last-passwords ul").prepend("<li>"+$(".password").html()+"</li>")),$(".last-passwords ul li").removeClass("active"),$(".last-passwords ul li:first-child").addClass("active"),localStorage.setItem("lastPasswords",$(".last-passwords ul").html()),$(".last-passwords li").length>1&&($(".last-passwords-icon").removeClass("hidden-hard"),localStorage.setItem("showLastPassIcon",!0)),hideSettings()}})};var initSettings=function(){if($$(".settings-icon").tap(function(){$(this).hasClass("active")?hideSettings():showSettings()}),$$(".settings .btn").tap(function(){$(this).toggleClass("active"),chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",no_repeat=!1,$(".settings .btn").each(function(){$(this).hasClass("active")&&($(this).hasClass("settings-symbols")&&(chars+='!";%:?*()_+=-~/<>,.[]{}'),$(this).hasClass("settings-numbers")&&(chars+="1234567890"),$(this).hasClass("settings-no-repeat")&&(no_repeat=!0))}),localStorage.setItem("chars",chars),localStorage.setItem("no_repeat",no_repeat),localStorage.setItem("settingsSymbols",$(".settings-symbols").attr("class")),localStorage.setItem("settingsNumbers",$(".settings-numbers").attr("class")),localStorage.setItem("settingsNoRepeat",$(".settings-no-repeat").attr("class"))}),$(".length-slider").length){var s=$.noUiSlider.Link;localStorage.getItem("passLength")&&(length=parseInt(localStorage.getItem("passLength"))),$(".length-slider").noUiSlider({start:length,range:{min:6,max:30},serialization:{lower:[new s({target:$(".length .number"),method:setPasswordLength})],format:{decimals:0}}})}};initLastPasswords=function(){$$(".last-passwords-icon").tap(function(){$(".last-passwords").removeClass("bounceOut").addClass("visible animated bounceIn"),$(".wrapper").toggleClass("blur"),$(".close").toggleClass("hidden")}),$$(".last-passwords ul li").tap(function(){$(".last-passwords ul li").removeClass("active"),$(this).addClass("active"),$(".password").html($(this).html()),localStorage.setItem("password",$(".password").html()),localStorage.setItem("lastPasswords",$(".last-passwords ul").html()),closeLastPass()}),$$(".last-passwords .close").tap(function(){closeLastPass()})},initLocalStorage=function(){var s=localStorage.getItem("password"),t=localStorage.getItem("lastPasswords"),e=localStorage.getItem("showLastPassIcon"),a=localStorage.getItem("settingsSymbols"),l=localStorage.getItem("settingsNumbers"),o=localStorage.getItem("settingsNoRepeat");s&&($(".password").html(s).removeClass("small"),$(".last-passwords ul").html(t)),e&&$(".last-passwords-icon").removeClass("hidden-hard"),a&&($(".settings-symbols").attr("class",a),$(".settings-numbers").attr("class",l),$(".settings-no-repeat").attr("class",o))};